{% extends "layout/base-navbar.html" %} {% block title %} Sitio de tareas-
Tareas jehan {% endblock %} {% block content %}

<style>
  .card-hover {
    transition: all 0.3s ease;
  }
  .card-hover:hover {
    transform: translateY(-5px);
    box-shadow: 0 1rem 2rem rgba(0, 0, 0, 0.15);
  }
  
</style>


  <form method="post" action="{% url 'tareas_filtradas' %}">
    {% csrf_token %}
    <input
      type="text"
      name="busqueda"
      placeholder="Buscar tarea con tu nombre"
      class="form-control w-25 mb-2"
    />
    <button type="submit" class="btn btn-primary mb-2">Buscar</button>
  </form>

  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for t in tareas %}
    <div class="col">
      <div class="card h-100 border-0 rounded-4 card-hover">
        <div
          class="card-header bg-white border-0 d-flex align-items-center p-3"
        >
          {% if t.usuario.foto_perfil %}

          <img
            src="{{ t.usuario.foto_perfil.url }}"
            class="rounded-circle border border-2 border-primary me-3"
            width="55"
            height="55"
            style="object-fit: cover"
          />
          {% endif %}
          <div>
            <small class="text-muted">Asignada por</small>
            <div class="fw-semibold">{{ t.usuario.nombre_usuario }}</div>
            <button class="btn btn-warning">
              <a
                href="{% url 'editar_usuario' t.usuario.id %}"
                class="link-underline link-underline-opacity-0"
                >Editar</a
              >
            </button>
          </div>
        </div>

        <div class="card-body d-flex flex-column">
          <h5 class="card-title text-primary fw-bold">
            <i class="bi bi-clipboard-check me-1"></i>{{ t.nombre_tarea }}
          </h5>

          <p class="card-text text-muted small flex-grow-1">
            {{ t.descripcion|truncatechars:120 }}
          </p>

          {% if t.estado %}
          <span class="badge bg-success align-self-start">
            <i class="bi bi-check-circle me-1"></i>Finalizada
          </span>
          {% else %}
          <span class="badge bg-warning text-dark align-self-start">
            <i class="bi bi-clock me-1"></i>Pendiente
          </span>
          {% endif %}
        </div>

        <div
          class="card-footer bg-white border-0 d-flex justify-content-between align-items-center"
        >
          <small class="text-muted">
            <i class="bi bi-calendar-event me-1"></i>{{ t.fecha_creacion }}
          </small>
          <button class="btn btn-warning">
            <a
              href="{% url 'editar_tarea' t.id %}"
              class="link-underline link-underline-opacity-0"
              >Editar</a
            >
          </button>
          <div
            class="card-footer bg-white border-0 d-flex justify-content-between align-items-center"
          >
            <button class="btn btn-warning">
              <a
                href="{% url 'eliminar_tarea' t.id %}"
                class="link-underline link-underline-opacity-0"
                >Eliminar</a
              >
            </button>
          </div>
        </div>
      </div>
    </div>
    {% empty %}

    <div class="col-12">
      <div class="card border-0 rounded-4 shadow-sm">
        <div class="card-body text-center p-5">
          <i class="bi bi-emoji-smile display-4 text-primary"></i>
          <h4 class="mt-3">¡Todo al día!</h4>
          <p class="text-muted mb-0">
            No tienes tareas pendientes en este momento.
          </p>
        </div>
      </div>
    </div>

    {% endfor %}
  </div>
</div>

<footer class="bg-white border-top py-3 mt-5">
  <div class="container text-center text-muted small">
    <p class="fw-bold">
      <a href="https://github.com/Jea111" class="link-underline-opacity-0"
        >Github Desarrollador:</a
      >
    </p>
  </div>
</footer>

{% endblock %}
